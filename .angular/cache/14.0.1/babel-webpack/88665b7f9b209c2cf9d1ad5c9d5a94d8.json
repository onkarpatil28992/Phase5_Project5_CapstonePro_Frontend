{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/user.service\";\nimport * as i2 from \"@angular/forms\";\nexport let EditProfileComponent = /*#__PURE__*/(() => {\n  class EditProfileComponent {\n    constructor(user_service) {\n      this.user_service = user_service;\n    }\n\n    ngOnInit() {\n      let curr_userName = sessionStorage.getItem('userName');\n      let resp = this.user_service.getUserByUsername(curr_userName);\n      resp.subscribe(response => {\n        let user_details = response['user'][0];\n        console.log(user_details);\n        this.user_firstName = user_details['firstName'];\n        this.user_lastName = user_details['lastName'];\n        this.user_address = user_details['userAddress'];\n        this.user_email = user_details['email'];\n        this.user_dob = user_details['dod'];\n        this.user_phoneNumber = user_details['phoneNumber'];\n      });\n    }\n\n    submitEdits(editProfileRef) {\n      let fname = document.getElementById('f_fname');\n      let lname = document.getElementById('f_lname');\n      let email = document.getElementById('f_email');\n      let address = document.getElementById('f_address');\n      let dob = document.getElementById('f_dob');\n      let phoneNum = document.getElementById('f_phoneNum');\n      fname.value = \"\";\n      lname.value = \"\";\n      email.value = \"\";\n      address.value = \"\";\n      dob.value = \"\";\n      phoneNum.value = \"\"; // Grab the currently logged in username from sessionStorage\n\n      let curr_userName = sessionStorage.getItem('userName');\n      let emailCheck = true;\n      editProfileRef['userName'] = curr_userName;\n      let final_UserEdits = {};\n\n      for (let [k, v] of Object.entries(editProfileRef)) {\n        console.log(k);\n\n        if (v != \"\") {\n          if (k == \"email\") {\n            if (this.user_service.regexp.test(editProfileRef.email)) {\n              final_UserEdits[k] = v;\n            } else {\n              emailCheck = false;\n              break;\n            }\n          } else {\n            final_UserEdits[k] = v;\n          }\n        }\n      }\n\n      console.log(final_UserEdits);\n\n      if (emailCheck) {\n        this.user_service.updateProfile(final_UserEdits);\n        alert(\"Profile has been updated\");\n      } else {\n        alert(\"Invalid email\");\n      }\n    }\n\n    submitNewPassword(updatePasswordRef) {\n      console.log(updatePasswordRef);\n      let curr_userName = sessionStorage.getItem('userName');\n      let resp = this.user_service.getUserByUsername(curr_userName);\n      resp.subscribe(response => {\n        let user_details = response['user'][0];\n        console.log(user_details);\n\n        if (updatePasswordRef['f_newPassword1'] != updatePasswordRef['f_newPassword2']) {\n          this.password1Res = \"❌ Password didn't match!\";\n          this.password2Res = \"❌ Password didn't match!\";\n        } else {\n          if (updatePasswordRef['f_currPassword'] == user_details['password']) {\n            console.log(\"Match!\"); // prep data to be changed\n\n            let update_details = {\n              userName: curr_userName,\n              password: updatePasswordRef['f_newPassword1']\n            }; // Send PUT request for password change\n\n            this.user_service.updatePassword(update_details).subscribe(res => {\n              if (res.status) {\n                alert(\"Your password has been successfully changed!\");\n              } else {\n                alert(\"Password could not be changed! Try again!\");\n              }\n            });\n          }\n        }\n      });\n    }\n\n  }\n\n  EditProfileComponent.ɵfac = function EditProfileComponent_Factory(t) {\n    return new (t || EditProfileComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n  };\n\n  EditProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditProfileComponent,\n    selectors: [[\"app-edit-profile\"]],\n    decls: 122,\n    vars: 8,\n    consts: [[1, \"bg-dark\"], [1, \"container\", \"bg-dark\", \"bg-gradient\", \"text-light\", \"text-center\", \"pt-3\"], [1, \"text-success\"], [1, \"row\"], [1, \"text-info\", \"col-sm-12\", \"pb-5\", \"pt-5\"], [1, \"col\"], [1, \"CurrentUserInfo\"], [1, \"infoType\"], [1, \"infoAnswer\"], [1, \"col\", \"text-dark\"], [1, \"editProfileContent\", 2, \"box-shadow\", \"0 4px 8px 0 rgba(0, 0, 0, 0.3), 0 6px 20px 0 rgba(0, 0, 0, 0.3)\"], [3, \"ngSubmit\"], [\"editProfileRef\", \"ngForm\"], [1, \"form-floating\", \"mb-3\"], [\"type\", \"text\", \"id\", \"f_fname\", \"name\", \"firstName\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_email\"], [\"type\", \"text\", \"id\", \"f_lname\", \"name\", \"lastName\", \"ngModel\", \"\", 1, \"form-control\"], [\"type\", \"email\", \"id\", \"f_email\", \"name\", \"email\", \"ngModel\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"id\", \"f_dob\", \"name\", \"dod\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_dob\"], [\"type\", \"text\", \"id\", \"f_phoneNum\", \"name\", \"phoneNumber\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_phoneNum\"], [\"type\", \"text\", \"id\", \"f_address\", \"name\", \"userAddress\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_address\"], [\"type\", \"submit\", \"value\", \"Done\", 1, \"btn\", \"btn-success\", \"formBtn\"], [\"type\", \"reset\", \"value\", \"Reset\", 1, \"btn\", \"btn-info\", \"formBtn\"], [1, \"text-info\"], [1, \"updatePasswordContent\", \"text-dark\", 2, \"box-shadow\", \"0 4px 8px 0 rgba(0, 0, 0, 0.3), 0 6px 20px 0 rgba(0, 0, 0, 0.3)\"], [\"updatePasswordRef\", \"ngForm\"], [\"type\", \"password\", \"id\", \"f_currPassword\", \"name\", \"f_currPassword\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_currPassword\"], [\"type\", \"password\", \"id\", \"f_newPassword1\", \"name\", \"f_newPassword1\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_newPassword1\"], [1, \"invalidPass\"], [\"type\", \"password\", \"id\", \"f_newPassword2\", \"name\", \"f_newPassword2\", \"ngModel\", \"\", 1, \"form-control\"], [\"for\", \"f_newPassword2\"]],\n    template: function EditProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r2 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \"Edit Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"hr\");\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"h3\");\n        i0.ɵɵtext(8, \" Update Basic Details\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 5)(10, \"div\", 6)(11, \"div\", 3)(12, \"div\", 5)(13, \"div\", 3)(14, \"p\", 7);\n        i0.ɵɵtext(15, \"First Name: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"p\", 8);\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 3)(19, \"p\", 7);\n        i0.ɵɵtext(20, \"Last Name: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"p\", 8);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 3)(24, \"p\", 7);\n        i0.ɵɵtext(25, \"E-Mail: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"p\", 8);\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"div\", 5)(29, \"div\", 3)(30, \"p\", 7);\n        i0.ɵɵtext(31, \"Address: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"p\", 8);\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"div\", 3)(35, \"p\", 7);\n        i0.ɵɵtext(36, \"Date of Birth: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"p\", 8);\n        i0.ɵɵtext(38);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"div\", 3)(40, \"p\", 7);\n        i0.ɵɵtext(41, \"Phone Number: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"p\", 8);\n        i0.ɵɵtext(43);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(44, \"div\", 9)(45, \"div\", 10)(46, \"form\", 11, 12);\n        i0.ɵɵlistener(\"ngSubmit\", function EditProfileComponent_Template_form_ngSubmit_46_listener() {\n          i0.ɵɵrestoreView(_r2);\n\n          const _r0 = i0.ɵɵreference(47);\n\n          return i0.ɵɵresetView(ctx.submitEdits(_r0.value));\n        });\n        i0.ɵɵelementStart(48, \"div\", 3)(49, \"div\", 5)(50, \"div\", 3)(51, \"div\", 5)(52, \"div\", 13);\n        i0.ɵɵelement(53, \"input\", 14);\n        i0.ɵɵelementStart(54, \"label\", 15);\n        i0.ɵɵtext(55, \"First Name\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(56, \"div\", 5)(57, \"div\", 13);\n        i0.ɵɵelement(58, \"input\", 16);\n        i0.ɵɵelementStart(59, \"label\", 15);\n        i0.ɵɵtext(60, \"Last Name\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(61, \"div\", 13);\n        i0.ɵɵelement(62, \"input\", 17);\n        i0.ɵɵelementStart(63, \"label\", 15);\n        i0.ɵɵtext(64, \"E-mail\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(65, \"div\", 3)(66, \"div\", 5)(67, \"div\", 13);\n        i0.ɵɵelement(68, \"input\", 18);\n        i0.ɵɵelementStart(69, \"label\", 19);\n        i0.ɵɵtext(70, \"Date of Birth\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(71, \"div\", 5)(72, \"div\", 13);\n        i0.ɵɵelement(73, \"input\", 20);\n        i0.ɵɵelementStart(74, \"label\", 21);\n        i0.ɵɵtext(75, \"Phone Number\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(76, \"div\", 13);\n        i0.ɵɵelement(77, \"input\", 22);\n        i0.ɵɵelementStart(78, \"label\", 23);\n        i0.ɵɵtext(79, \"Address\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(80, \"div\", 3)(81, \"div\", 5);\n        i0.ɵɵelement(82, \"input\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(83, \"div\", 5);\n        i0.ɵɵelement(84, \"input\", 25);\n        i0.ɵɵelementEnd()()()()()()()();\n        i0.ɵɵelement(85, \"hr\");\n        i0.ɵɵelementStart(86, \"h3\")(87, \"span\", 2);\n        i0.ɵɵtext(88, \"Forgot your password? \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(89, \"span\", 26);\n        i0.ɵɵtext(90, \"Change it here!\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(91, \"br\");\n        i0.ɵɵelementStart(92, \"div\", 27)(93, \"form\", 11, 28);\n        i0.ɵɵlistener(\"ngSubmit\", function EditProfileComponent_Template_form_ngSubmit_93_listener() {\n          i0.ɵɵrestoreView(_r2);\n\n          const _r1 = i0.ɵɵreference(94);\n\n          return i0.ɵɵresetView(ctx.submitNewPassword(_r1.value));\n        });\n        i0.ɵɵelementStart(95, \"div\", 3)(96, \"div\", 5)(97, \"div\", 13);\n        i0.ɵɵelement(98, \"input\", 29);\n        i0.ɵɵelementStart(99, \"label\", 30);\n        i0.ɵɵtext(100, \"Current Password\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(101, \"div\", 3)(102, \"div\", 5)(103, \"div\", 13);\n        i0.ɵɵelement(104, \"input\", 31);\n        i0.ɵɵelementStart(105, \"label\", 32);\n        i0.ɵɵtext(106, \"New Password\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(107, \"p\", 33);\n        i0.ɵɵtext(108);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(109, \"div\", 3)(110, \"div\", 5)(111, \"div\", 13);\n        i0.ɵɵelement(112, \"input\", 34);\n        i0.ɵɵelementStart(113, \"label\", 35);\n        i0.ɵɵtext(114, \"Confirm New Password\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(115, \"p\", 33);\n        i0.ɵɵtext(116);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(117, \"div\", 3)(118, \"div\", 5);\n        i0.ɵɵelement(119, \"input\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(120, \"div\", 5);\n        i0.ɵɵelement(121, \"input\", 25);\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(17);\n        i0.ɵɵtextInterpolate(ctx.user_firstName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.user_lastName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.user_email);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.user_address);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.user_dob);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.user_phoneNumber);\n        i0.ɵɵadvance(65);\n        i0.ɵɵtextInterpolate(ctx.password1Res);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.password2Res);\n      }\n    },\n    dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgModel, i2.NgForm],\n    styles: [\"h2[_ngcontent-%COMP%]{margin:auto}h3[_ngcontent-%COMP%]{text-align:center}.CurrentUserInfo[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;font-size:20px}.infoType[_ngcontent-%COMP%]{font-weight:700}.editProfileContent[_ngcontent-%COMP%]{border:5px solid black;padding:15px;border-radius:10px}.updatePasswordContent[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;flex-direction:row;align-items:center;justify-content:center;border:5px solid black;border-radius:10px;padding:15px}.passInput[_ngcontent-%COMP%]{width:100%}.formBtn[_ngcontent-%COMP%]{width:100%;margin:5px}\"]\n  });\n  return EditProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
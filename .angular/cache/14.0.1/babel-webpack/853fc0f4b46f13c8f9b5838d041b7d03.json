{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/orders.service\";\nimport * as i2 from \"src/app/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction DeliveredOrdersComponent_div_2_tr_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5[\"id\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5[\"quantity\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5[\"total\"]);\n  }\n}\n\nfunction DeliveredOrdersComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"form\", 4, 5);\n    i0.ɵɵlistener(\"ngSubmit\", function DeliveredOrdersComponent_div_2_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n\n      const _r3 = i0.ɵɵreference(2);\n\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.submitOrderStatusUpdate(_r3.value));\n    });\n    i0.ɵɵelementStart(3, \"div\", 6)(4, \"span\", 7);\n    i0.ɵɵtext(5, \"Order Number:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementStart(8, \"span\", 7);\n    i0.ɵɵtext(9, \"Recipient:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelement(11, \"br\");\n    i0.ɵɵelementStart(12, \"span\", 7);\n    i0.ɵɵtext(13, \"Date of Purchase:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelement(15, \"br\");\n    i0.ɵɵelementStart(16, \"span\", 7);\n    i0.ɵɵtext(17, \"Order Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelement(19, \"br\")(20, \"input\", 8);\n    i0.ɵɵelementStart(21, \"label\", 9);\n    i0.ɵɵtext(22, \"Pending\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"br\")(24, \"input\", 10);\n    i0.ɵɵelementStart(25, \"label\", 9);\n    i0.ɵɵtext(26, \"Shipped\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"br\")(28, \"input\", 11);\n    i0.ɵɵelementStart(29, \"label\", 9);\n    i0.ɵɵtext(30, \"Delivered\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(31, \"br\")(32, \"input\", 12);\n    i0.ɵɵelementStart(33, \"label\", 9);\n    i0.ɵɵtext(34, \"Cancelled\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(35, \"br\")(36, \"input\", 13);\n    i0.ɵɵelementStart(37, \"label\", 9);\n    i0.ɵɵtext(38, \"Out for Delivery\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(39, \"br\");\n    i0.ɵɵelementStart(40, \"div\", 14)(41, \"table\")(42, \"thead\")(43, \"th\");\n    i0.ɵɵtext(44, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"th\");\n    i0.ɵɵtext(46, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"th\");\n    i0.ɵɵtext(48, \"Price\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(49, \"tbody\");\n    i0.ɵɵtemplate(50, DeliveredOrdersComponent_div_2_tr_50_Template, 7, 3, \"tr\", 15);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(51, \"div\", 16);\n    i0.ɵɵelement(52, \"input\", 17)(53, \"input\", 18);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const order_r1 = ctx.$implicit;\n    const idx_r2 = ctx.index;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", order_r1[\"id\"], \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", order_r1[\"userName\"], \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", order_r1[\"date\"], \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", order_r1[\"status\"], \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"name\", order_r1[\"id\"])(\"id\", \"order1_\" + idx_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"order1_\" + idx_r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"name\", order_r1[\"id\"])(\"id\", \"order2_\" + idx_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"order2_\" + idx_r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"name\", order_r1[\"id\"])(\"id\", \"order3_\" + idx_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"order3_\" + idx_r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"name\", order_r1[\"id\"])(\"id\", \"order4_\" + idx_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"order1_\" + idx_r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"name\", order_r1[\"id\"])(\"id\", \"order5_\" + idx_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"order1_\" + idx_r2);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", order_r1[\"cart\"]);\n  }\n}\n\nexport let DeliveredOrdersComponent = /*#__PURE__*/(() => {\n  class DeliveredOrdersComponent {\n    constructor(order_service, userService) {\n      this.order_service = order_service;\n      this.userService = userService;\n    }\n\n    ngOnInit() {\n      this.order_service.getOrderByStatus({\n        status: \"Delivered\"\n      }).subscribe(res => {\n        console.log(\"In subscribe\");\n        console.log(res);\n        this.orders = res[\"order\"];\n      });\n    }\n\n    submitOrderStatusUpdate(orderRef) {\n      console.log(orderRef);\n\n      for (let [k, v] of Object.entries(orderRef)) {\n        orderRef['id'] = k;\n        orderRef['status'] = v;\n        break;\n      }\n\n      this.order_service.updateOrderStatus(orderRef).subscribe(res => {\n        console.log(res);\n        console.log(orderRef.status);\n\n        if (res.status) {\n          alert(\"Updated the status of the order\");\n\n          if (orderRef.status == \"Cancelled\") {\n            let funds_info = {\n              userName: res[\"userName\"],\n              funds: res[\"total\"]\n            };\n            this.userService.addFunds(funds_info).subscribe(res => {\n              alert(\"User funds have also been updated\");\n            });\n          }\n        } else {\n          alert(\"Issue with updating the order status\");\n        }\n      });\n    }\n\n  }\n\n  DeliveredOrdersComponent.ɵfac = function DeliveredOrdersComponent_Factory(t) {\n    return new (t || DeliveredOrdersComponent)(i0.ɵɵdirectiveInject(i1.OrdersService), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n\n  DeliveredOrdersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DeliveredOrdersComponent,\n    selectors: [[\"app-delivered-orders\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"container\", \"text-light\"], [1, \"pendingOrderArea\"], [\"class\", \"OrderFormArea\", 4, \"ngFor\", \"ngForOf\"], [1, \"OrderFormArea\"], [3, \"ngSubmit\"], [\"orderRef\", \"ngForm\"], [1, \"orderDetails\"], [1, \"productItem\"], [\"type\", \"radio\", \"value\", \"Pending\", \"ngModel\", \"\", 1, \"form-check-input\", 3, \"name\", \"id\"], [3, \"for\"], [\"type\", \"radio\", \"value\", \"Shipped\", \"ngModel\", \"\", 1, \"form-check-input\", 3, \"name\", \"id\"], [\"type\", \"radio\", \"value\", \"Delivered\", \"ngModel\", \"\", 1, \"form-check-input\", 3, \"name\", \"id\"], [\"type\", \"radio\", \"value\", \"Cancelled\", \"ngModel\", \"\", 1, \"form-check-input\", 3, \"name\", \"id\"], [\"type\", \"radio\", \"value\", \"outForDelivery\", \"ngModel\", \"\", 1, \"form-check-input\", 3, \"name\", \"id\"], [1, \"cart\"], [4, \"ngFor\", \"ngForOf\"], [2, \"margin\", \"auto\", \"width\", \"fit-content\"], [\"type\", \"submit\", \"value\", \"Submit Order Status Update\", 1, \"btn\", \"btn-success\", \"orderStatusBtn\"], [\"type\", \"reset\", \"value\", \"Reset\", 1, \"btn\", \"btn-success\", \"orderStatusBtn\"]],\n    template: function DeliveredOrdersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, DeliveredOrdersComponent_div_2_Template, 54, 20, \"div\", 2);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n      }\n    },\n    dependencies: [i3.NgForOf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.RadioControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n    styles: [\".deliveredOrderArea[_ngcontent-%COMP%]{margin:auto}.orderDetails[_ngcontent-%COMP%]{border:5px solid black;border-radius:10px;width:-moz-fit-content;width:fit-content;padding:30px;margin:30px auto}.orderStatusBtn[_ngcontent-%COMP%]{margin:10px}.productItem[_ngcontent-%COMP%]{font-weight:700;margin:5px}.cart[_ngcontent-%COMP%]{margin:5px;border:2px solid black;border-radius:10px}th[_ngcontent-%COMP%]{padding:10px;text-align:center;margin:auto}td[_ngcontent-%COMP%]{text-align:center;margin:auto}\"]\n  });\n  return DeliveredOrdersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}